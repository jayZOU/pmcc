{"version":3,"file":"pmcc.umd.js","sources":["../src/pmcc.js"],"sourcesContent":["\r\nimport Memcached from 'memcached';\r\n\r\nclass Pmcc{\r\n\tconstructor(hostPort, opt = {}){\r\n\t\tthis.memcacher = new Memcached(hostPort, opt);\r\n\t}\r\n\r\n\tinit(){\r\n\t\tlet pmcc = {};\r\n\r\n\r\n\t\tpmcc.touch = this.factory(this.memcacher.touch);\r\n\t\tpmcc.get = this.factory(this.memcacher.get);\r\n\t\tpmcc.gets = this.factory(this.memcacher.gets);\r\n\t\tpmcc.getMulti = this.factory(this.memcacher.getMulti);\r\n\t\tpmcc.set = this.factory(this.memcacher.set);\r\n\t\tpmcc.replace  = this.factory(this.memcacher.replace );\r\n\t\tpmcc.cas = this.factory(this.memcacher.cas);\r\n\t\tpmcc.append = this.factory(this.memcacher.append);\r\n\t\tpmcc.prepend = this.factory(this.memcacher.prepend);\r\n\t\tpmcc.incr = this.factory(this.memcacher.incr);\r\n\t\tpmcc.decr = this.factory(this.memcacher.decr);\r\n\t\tpmcc.del = this.factory(this.memcacher.del);\r\n\t\tpmcc.version = this.factory(this.memcacher.version);\r\n\t\tpmcc.flush = this.factory(this.memcacher.flush);\r\n\t\tpmcc.stats = this.factory(this.memcacher.stats);\r\n\t\tpmcc.settings = this.factory(this.memcacher.settings);\r\n\t\tpmcc.slabs = this.factory(this.memcacher.slabs);\r\n\t\tpmcc.items = this.factory(this.memcacher.items);\r\n\t\tpmcc.cachedump = this.factory(this.memcacher.cachedump);\r\n\t\tpmcc.end = this.factory(this.memcacher.end);\r\n\r\n\t\t// pmcc.del = this.factory(this.memcacher.del);\r\n\t\t// pmcc.items = this.factory(this.memcacher.items);\r\n\t\t// pmcc.cachedump = this.factory(this.memcacher.cachedump);\r\n\t\treturn pmcc;\r\n\r\n\t}\r\n\r\n\tfactory(fn){\r\n\t\tconst that = this;\r\n\t\treturn function (...obj) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tfn.call(that.memcacher, ...obj, (err, data) => {\r\n\t\t\t\t\tif(err) reject(err);\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprimeval(){\r\n\t\treturn this.memcacher;\r\n\t}\r\n}\r\n\r\nexport default Pmcc;\r\n\r\n"],"names":[],"mappings":"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"}